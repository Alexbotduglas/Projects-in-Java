import java.util.Arrays; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å Arrays –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è)
import java.util.InputMismatchException; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—á–∏—Å–ª–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
import java.util.Scanner; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å Scanner –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∫–æ–Ω—Å–æ–ª–∏

// –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –∏–≥—Ä—ã "–ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏"
public class Main {

    // –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç Scanner, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
    private static final Scanner SCANNER = new Scanner(System.in);
    // –î–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ 3x3.
    private static char[][] board = new char[3][3];
    // –°–∏–º–≤–æ–ª —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —Å–¥–µ–ª–∞—Ç—å —Ö–æ–¥ ('X' –∏–ª–∏ 'O')
    private static char currentPlayer = 'X';
    // –§–ª–∞–≥, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π, –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –ª–∏ –∏–≥—Ä–∞ (–ø–æ–±–µ–¥–∞ –∏–ª–∏ –Ω–∏—á—å—è)
    private static boolean gameIsOver = false;
    // –ù–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–ø–∞—Å—Ö–∞–ª–∫–∞)
    private static boolean secretModeActivated = false;
    // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è (3 –∏–ª–∏ 5)
    private static int boardSize = 3;

    // --- –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ (–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞) ---
    public static void main(String[] args) {
        // –í—ã–≤–æ–¥ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        System.out.println("ü§ñ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É –ö—Ä–µ—Å—Ç–∏–∫–∏-–ù–æ–ª–∏–∫–∏!");
        // –í—ã–≤–æ–¥ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º –∫–æ–¥–µ
        System.out.println(">>> –ü–æ–¥—Å–∫–∞–∑–∫–∞: –í–≤–µ–¥–∏—Ç–µ 'JAVA' –≤–º–µ—Å—Ç–æ –Ω–æ–º–µ—Ä–∞ —è—á–µ–π–∫–∏ –¥–ª—è –ü–∞—Å—Ö–∞–ª–∫–∏! <<<");

        // –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        initializeBoard();

        // –ì–ª–∞–≤–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª, –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –∏–≥—Ä–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
        while (!gameIsOver) {
            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
            printBoard();

            // –°—á–∏—Ç—ã–≤–∞–Ω–∏–µ —Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–ª–∏ [-1, -1] –¥–ª—è –ø–∞—Å—Ö–∞–ª–∫–∏
            int[] move = getPlayerMove();
            // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ —Å—Ç—Ä–æ–∫–∏
            int row = move[0];
            // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ —Å—Ç–æ–ª–±—Ü–∞
            int col = move[1];

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –ø–∞—Å—Ö–∞–ª–∫–∏ (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–¥ [-1, -1])
            if (row == -1 && col == -1) {
                // –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
                activateSecretMode();
                // –ù–∞—á–∏–Ω–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é –∏—Ç–µ—Ä–∞—Ü–∏—é —Ü–∏–∫–ª–∞
                continue;
            }

            // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ö–æ–¥–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞, –≤–∞–ª–∏–¥–µ–Ω –ª–∏ —Ö–æ–¥
            if (isValidMove(row, col)) {
                // –ï—Å–ª–∏ —Ö–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏–º–≤–æ–ª —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞ –Ω–∞ –ø–æ–ª–µ
                board[row][col] = currentPlayer;

                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–±–µ–¥—É
                if (checkWin()) {
                    // –í—ã–≤–æ–¥–∏–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ
                    printBoard();
                    // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ
                    System.out.println("\nüéâ –ò–≥—Ä–æ–∫ " + currentPlayer + " –ø–æ–±–µ–¥–∏–ª!");
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
                    gameIsOver = true;
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∏—á—å—é (–ø–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)
                } else if (isBoardFull()) {
                    // –í—ã–≤–æ–¥–∏–º —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ
                    printBoard();
                    // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∏—á—å–µ–π
                    System.out.println("\nü§ù –ù–∏—á—å—è! –ü–æ–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ.");
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
                    gameIsOver = true;
                } else {
                    // –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –æ–∫–æ–Ω—á–µ–Ω–∞, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –∏–≥—Ä–æ–∫–∞
                    switchPlayer();
                }
            } else {
                // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Ö–æ–¥–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —è—á–µ–µ–∫
                System.out.println("‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ö–æ–¥! –Ø—á–µ–π–∫–∞ –∑–∞–Ω—è—Ç–∞ –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ –ø–æ–ª—è (1-" + (boardSize * boardSize) + "). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.");
            }
        }

        // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã
        System.out.println("–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É!");
        // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–±—ä–µ–∫—Ç–∞ Scanner
        SCANNER.close();
    }

    // --- –ú–µ—Ç–æ–¥—ã –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò –∏ –û–¢–û–ë–†–ê–ñ–ï–ù–ò–Ø ---

    /**
     * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ, —Å–æ–∑–¥–∞–≤–∞—è –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –Ω—É–∂–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏ –∑–∞–ø–æ–ª–Ω—è—è –µ–≥–æ –ø—Ä–æ–±–µ–ª–∞–º–∏.
     */
    private static void initializeBoard() {
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ —Å —Ç–µ–∫—É—â–∏–º —Ä–∞–∑–º–µ—Ä–æ–º (boardSize x boardSize)
        board = new char[boardSize][boardSize];
        // –¶–∏–∫–ª –ø–æ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–∞–º
        for (int i = 0; i < boardSize; i++) {
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É —Å–∏–º–≤–æ–ª–∞–º–∏-–ø—Ä–æ–±–µ–ª–∞–º–∏
            Arrays.fill(board[i], ' ');
        }
    }

    /**
     * –í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ –∫–æ–Ω—Å–æ–ª—å.
     */
    private static void printBoard() {
        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–ª—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
        System.out.println("\n--- –¢–µ–∫—É—â–µ–µ –ø–æ–ª–µ (" + boardSize + "x" + boardSize + ") ---");
        // –¶–∏–∫–ª –ø–æ —Å—Ç—Ä–æ–∫–∞–º –¥–ª—è –ø–µ—á–∞—Ç–∏
        for (int i = 0; i < boardSize; i++) {
            // –ù–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏ —Å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º
            System.out.print("|");
            // –¶–∏–∫–ª –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º –¥–ª—è –ø–µ—á–∞—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —è—á–µ–µ–∫
            for (int j = 0; j < boardSize; j++) {
                // –ü–µ—á–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —è—á–µ–π–∫–∏ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏
                System.out.print(" " + board[i][j] + " |");
            }
            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–µ—á–∞—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ª—è
            System.out.println();
            // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —ç—Ç–æ –Ω–µ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ (–¥–ª—è –ø–µ—á–∞—Ç–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è)
            if (i < boardSize - 1) {
                // –¶–∏–∫–ª –¥–ª—è –ø–µ—á–∞—Ç–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
                for(int k = 0; k < boardSize; k++) System.out.print("----");
                // –ó–∞–≤–µ—Ä—à–∞—é—â–∏–π —Å–∏–º–≤–æ–ª —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
                System.out.println("-");
            }
        }
        // –ó–∞–≤–µ—Ä—à–∞—é—â–∞—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ª–∏–Ω–∏—è
        System.out.println("--------------------------------\n");
    }

    // --- –ú–µ—Ç–æ–¥—ã –°–ï–ö–†–ï–¢–ù–û–ô –õ–û–ì–ò–ö–ò ---

    /**
     * –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º, –º–µ–Ω—è–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è –Ω–∞ 5x5 –∏ –≤—ã–≤–æ–¥–∏—Ç "–ø–∞—Å—Ö–∞–ª–∫—É".
     */
    private static void activateSecretMode() {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ä–µ–∂–∏–º –µ—â–µ –Ω–µ –±—ã–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
        if (!secretModeActivated) {
            // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
            System.out.println("\n‚≠ê‚≠ê‚≠ê –ü–ê–°–•–ê–õ–ö–ê –ê–ö–¢–ò–í–ò–†–û–í–ê–ù–ê! ‚≠ê‚≠ê‚≠ê");
            // –°–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            System.out.println("–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ —Å—Ä–∞–±–æ—Ç–∞–ª! –í—ã –Ω–∞—à–ª–∏ '–º–∏—Ä', —Å–ø—Ä—è—Ç–∞–Ω–Ω—ã–π –≤ –∫–æ–¥–µ.");
            // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞–≥—Ä–∞–¥–µ (–∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–ª—è)
            System.out.println(">>> –ù–∞–≥—Ä–∞–¥–∞: –ü–æ–ª–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–æ –¥–æ 5x5! –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Ö–∞—Ä–¥–∫–æ—Ä–æ–º! <<<");

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
            secretModeActivated = true;
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è
            boardSize = 5;
            // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –ø–æ–ª–µ –Ω–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
            initializeBoard();
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–≥—Ä–æ–∫–∞ –Ω–∞ 'X', —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å —Ö–æ–¥ –Ω–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –ø–∞—Å—Ö–∞–ª–∫–∏
            currentPlayer = 'X';
        } else {
            // –°–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ —Ä–µ–∂–∏–º —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω
            System.out.println("–°–µ–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ–∂–∏–º —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –∏–≥—Ä–∞—Ç—å!");
        }
    }

    // --- –ú–µ—Ç–æ–¥—ã –í–í–û–î–ê –∏ –õ–û–ì–ò–ö–ò –•–û–î–ê ---

    /**
     * –°—á–∏—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –æ—Ç –∏–≥—Ä–æ–∫–∞, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —á–∏—Å–ª–æ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.
     * @return –ú–∞—Å—Å–∏–≤ int[2]: [—Å—Ç—Ä–æ–∫–∞, —Å—Ç–æ–ª–±–µ—Ü] –∏–ª–∏ [-1, -1] –¥–ª—è –ø–∞—Å—Ö–∞–ª–∫–∏.
     */
    private static int[] getPlayerMove() {
        // –í—ã—á–∏—Å–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–ª—è
        int maxCell = boardSize * boardSize;

        // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≤–≤–æ–¥ —É —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
        System.out.print("–ò–≥—Ä–æ–∫ " + currentPlayer + ", –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —è—á–µ–π–∫–∏ (1-" + maxCell + "): ");

        // –°—á–∏—Ç—ã–≤–∞–µ–º –≤–≤–æ–¥ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥)
        String input = SCANNER.next().trim();

        // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥, –∏–≥–Ω–æ—Ä–∏—Ä—É—è —Ä–µ–≥–∏—Å—Ç—Ä
        if (input.toUpperCase().equals("JAVA")) {
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–¥ [-1, -1] –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–∞—Å—Ö–∞–ª–∫–∏
            return new int[]{-1, -1};
        }

        // 2. –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —á–∏—Å–ª–æ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        try {
            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
            int cellNumber = Integer.parseInt(input);

            // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —á–∏—Å–ª–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–æ–ø—É—Å—Ç–∏–º–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
            if (cellNumber < 1 || cellNumber > maxCell) {
                // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
                System.out.println("‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ " + maxCell + ".");
                // –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤–≤–æ–¥–∞
                return getPlayerMove();
            }

            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —è—á–µ–π–∫–∏ (1-N) –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–∞—Å—Å–∏–≤–∞ (0-–∏–Ω–¥–µ–∫—Å)
            // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ (cellNumber - 1)
            int index = cellNumber - 1;
            // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ (—Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ)
            int row = index / boardSize;
            // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–∞ (–æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è)
            int col = index % boardSize;

            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –≤–∞–ª–∏–¥–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
            return new int[]{row, col};

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –µ—Å–ª–∏ –≤–≤–æ–¥ –Ω–µ –±—ã–ª —á–∏—Å–ª–æ–º
        } catch (NumberFormatException e) {
            // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ—á–∏—Å–ª–æ–≤–æ–º –≤–≤–æ–¥–µ
            System.out.println("‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ (1-" + maxCell + ") –∏–ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥.");
            // –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤–≤–æ–¥–∞
            return getPlayerMove();
        }
    }

    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ö–æ–¥ –¥–æ–ø—É—Å—Ç–∏–º—ã–º (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø–æ–ª—è –∏ —è—á–µ–π–∫–∞ –ø—É—Å—Ç–∞).
     * @param row –ò–Ω–¥–µ–∫—Å —Å—Ç—Ä–æ–∫–∏
     * @param col –ò–Ω–¥–µ–∫—Å —Å—Ç–æ–ª–±—Ü–∞
     * @return true, –µ—Å–ª–∏ —Ö–æ–¥ –¥–æ–ø—É—Å—Ç–∏–º, –∏–Ω–∞—á–µ false.
     */
    private static boolean isValidMove(int row, int col) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–Ω–¥–µ–∫—Å —Å—Ç—Ä–æ–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø–æ–ª—è
        if (row < 0 || row >= boardSize) {
            return false;
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–Ω–¥–µ–∫—Å —Å—Ç–æ–ª–±—Ü–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø–æ–ª—è
        if (col < 0 || col >= boardSize) {
            return false;
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —è—á–µ–π–∫–∞ –ø—É—Å—Ç–∞ (' ')
        return board[row][col] == ' ';
    }

    /**
     * –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞.
     */
    private static void switchPlayer() {
        // –°–º–µ–Ω–∞ 'X' –Ω–∞ 'O' –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç —Å –ø–æ–º–æ—â—å—é —Ç–µ—Ä–Ω–∞—Ä–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
        currentPlayer = (currentPlayer == 'X') ? 'O' : 'X';
    }

    // --- –ú–µ—Ç–æ–¥—ã –ü–†–û–í–ï–†–ö–ò –°–û–°–¢–û–Ø–ù–ò–Ø –ò–ì–†–´ (–ü—Ä–æ–≤–µ—Ä—è—é—Ç 3 –ø–æ–¥—Ä—è–¥ –Ω–∞ –ø–æ–ª–µ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞) ---

    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —É—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã (—Å—Ç—Ä–æ–∫–∏, —Å—Ç–æ–ª–±—Ü—ã, –¥–∏–∞–≥–æ–Ω–∞–ª–∏).
     * @return true, –µ—Å–ª–∏ –µ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è, –∏–Ω–∞—á–µ false.
     */
    private static boolean checkWin() {
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ò–õ–ò –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Å—Ç—Ä–æ–∫, —Å—Ç–æ–ª–±—Ü–æ–≤ –∏ –¥–∏–∞–≥–æ–Ω–∞–ª–µ–π
        return (checkRows() || checkColumns() || checkDiagonals());
    }

    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ–¥—Ä—è–¥ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏.
     */
    private static boolean checkRows() {
        // –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫
        for (int i = 0; i < boardSize; i++) {
            // –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –Ω–∞—á–∞–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –¥–ª—è —Ç—Ä–æ–π–∫–∏
            for (int j = 0; j <= boardSize - 3; j++) {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ—Ö —è—á–µ–µ–∫ –ø–æ–¥—Ä—è–¥ –≤ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–µ
                if (board[i][j] == currentPlayer && board[i][j+1] == currentPlayer && board[i][j+2] == currentPlayer) {
                    // –ù–∞–π–¥–µ–Ω–∞ –≤—ã–∏–≥—Ä—ã—à–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
                    return true;
                }
            }
        }
        // –í—ã–∏–≥—Ä—ã—à–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤ —Å—Ç—Ä–æ–∫–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        return false;
    }

    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ–¥—Ä—è–¥ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏.
     */
    private static boolean checkColumns() {
        // –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤
        for (int j = 0; j < boardSize; j++) {
            // –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –Ω–∞—á–∞–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –¥–ª—è —Ç—Ä–æ–π–∫–∏
            for (int i = 0; i <= boardSize - 3; i++) {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ—Ö —è—á–µ–µ–∫ –ø–æ–¥—Ä—è–¥ –≤ —Ç–µ–∫—É—â–µ–º —Å—Ç–æ–ª–±—Ü–µ
                if (board[i][j] == currentPlayer && board[i+1][j] == currentPlayer && board[i+2][j] == currentPlayer) {
                    // –ù–∞–π–¥–µ–Ω–∞ –≤—ã–∏–≥—Ä—ã—à–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
                    return true;
                }
            }
        }
        // –í—ã–∏–≥—Ä—ã—à–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        return false;
    }

    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ–¥—Ä—è–¥ –ø–æ –æ–±–µ–∏–º –¥–∏–∞–≥–æ–Ω–∞–ª—è–º.
     */
    private static boolean checkDiagonals() {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–∞–≤–Ω–æ–π –¥–∏–∞–≥–æ–Ω–∞–ª–∏ (—Å–≤–µ—Ä—Ö—É-—Å–ª–µ–≤–∞ –≤–Ω–∏–∑-–≤–ø—Ä–∞–≤–æ)
        for (int i = 0; i <= boardSize - 3; i++) {
            for (int j = 0; j <= boardSize - 3; j++) {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–æ–π–∫–∏ –ø–æ –≥–ª–∞–≤–Ω–æ–π –¥–∏–∞–≥–æ–Ω–∞–ª–∏
                if (board[i][j] == currentPlayer && board[i+1][j+1] == currentPlayer && board[i+2][j+2] == currentPlayer) {
                    return true;
                }
            }
        }
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–æ—á–Ω–æ–π –¥–∏–∞–≥–æ–Ω–∞–ª–∏ (—Å–≤–µ—Ä—Ö—É-—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑-–≤–ª–µ–≤–æ)
        for (int i = 0; i <= boardSize - 3; i++) {
            // j –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 2, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç—Ä–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ —Å–ø—Ä–∞–≤–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
            for (int j = 2; j < boardSize; j++) {
                 // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–æ–π–∫–∏ –ø–æ –ø–æ–±–æ—á–Ω–æ–π –¥–∏–∞–≥–æ–Ω–∞–ª–∏
                 if (board[i][j] == currentPlayer && board[i+1][j-1] == currentPlayer && board[i+2][j-2] == currentPlayer) {
                    return true;
                }
            }
        }
        // –í—ã–∏–≥—Ä—ã—à–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ –¥–∏–∞–≥–æ–Ω–∞–ª—è–º –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        return false;
    }

    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ª–∏ –≤—Å–µ –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ (—É—Å–ª–æ–≤–∏–µ –¥–ª—è –Ω–∏—á—å–µ–π).
     * @return true, –µ—Å–ª–∏ –Ω–∞ –ø–æ–ª–µ –Ω–µ—Ç –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫, –∏–Ω–∞—á–µ false.
     */
    private static boolean isBoardFull() {
        // –¶–∏–∫–ª –ø–æ —Å—Ç—Ä–æ–∫–∞–º
        for (int i = 0; i < boardSize; i++) {
            // –¶–∏–∫–ª –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º
            for (int j = 0; j < boardSize; j++) {
                // –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ –ø—É—Å—Ç–∞—è —è—á–µ–π–∫–∞
                if (board[i][j] == ' ') {
                    // –ü–æ–ª–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º false
                    return false;
                }
            }
        }
        // –ï—Å–ª–∏ —Ü–∏–∫–ª—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å, –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫ –Ω–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º true
        return true;
    }
}
