import java.time.format.DateTimeParseException; // –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –¥–∞—Ç—ã
import java.util.InputMismatchException; // –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤–≤–æ–¥–∞ (–µ—Å–ª–∏ –æ–∂–∏–¥–∞–ª–æ—Å—å —á–∏—Å–ª–æ, –∞ –≤–≤–µ–¥–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞)
import java.util.Scanner; // –î–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

/**
 * –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç–æ–¥ main –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.
 */
public class ExpenseApp {

    public static void main(String[] args) {
        ExpenseManager manager = new ExpenseManager(); // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
        Scanner scanner = new Scanner(System.in); // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç Scanner –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–æ–Ω—Å–æ–ª–∏
        int choice = -1; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ –º–µ–Ω—é, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è != 0

        System.out.println("\n--- üíº –î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í –ú–ï–ù–ï–î–ñ–ï–† –†–ê–°–•–û–î–û–í ---"); // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ

        while (choice != 0) { // –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã: –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤—ã–±–µ—Ä–µ—Ç "–í—ã—Ö–æ–¥" (0)
            displayMenu(); // –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ–Ω—é

            try {
                System.out.print("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –æ–ø—Ü–∏–∏: "); // –ó–∞–ø—Ä–æ—Å –≤–≤–æ–¥–∞
                choice = scanner.nextInt(); // –°—á–∏—Ç—ã–≤–∞–µ–º —á–∏—Å–ª–æ (–Ω–æ–º–µ—Ä –æ–ø—Ü–∏–∏)
                scanner.nextLine(); // –û—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ—Å–ª–µ nextInt(), —á—Ç–æ–±—ã nextLine() —Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

                switch (choice) { // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    case 1:
                        addExpense(manager, scanner); // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞
                        break;
                    case 2:
                        manager.viewExpenses(); // –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
                        break;
                    case 3:
                        double total = manager.calculateTotal(); // –†–∞—Å—á–µ—Ç –æ–±—â–µ–π —Å—É–º–º—ã
                        System.out.printf("\nüí∞ –û–±—â–∞—è —Å—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤: %.2f —Ä.\n\n", total); // –í—ã–≤–æ–¥ –æ–±—â–µ–π —Å—É–º–º—ã
                        break;
                    case 4:
                        manager.saveExpenses(); // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª
                        break;
                    case 0:
                        System.out.println("\nüëã –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ!"); // –°–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Ö–æ–¥–µ
                        break;
                    default:
                        System.out.println("üö´ –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 4."); // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —á–∏—Å–ª–∞
                }
            } catch (InputMismatchException e) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –Ω–µ —á–∏—Å–ª–æ, –∫–æ–≥–¥–∞ –æ–∂–∏–¥–∞–ª–æ—Å—å —á–∏—Å–ª–æ
                System.out.println("‚ùå –û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞: –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.");
                scanner.nextLine(); // –û—á–∏—Å—Ç–∫–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –≤ –±—É—Ñ–µ—Ä–µ
                choice = -1; // –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —Ü–∏–∫–ª–∞
            }
            System.out.println("---"); // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
        }

        scanner.close(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º Scanner, –æ—Å–≤–æ–±–æ–∂–¥–∞—è —Ä–µ—Å—É—Ä—Å—ã
    }

    /**
     * –ú–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é –≤ –∫–æ–Ω—Å–æ–ª–∏.
     */
    private static void displayMenu() {
        System.out.println("\n*** –ú–ï–ù–Æ ***");
        System.out.println("1. ‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ä–∞—Å—Ö–æ–¥");
        System.out.println("2. üìã –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ä–∞—Å—Ö–æ–¥—ã");
        System.out.println("3. üßÆ –ü–æ—Å—á–∏—Ç–∞—Ç—å –æ–±—â—É—é —Å—É–º–º—É");
        System.out.println("4. üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª");
        System.out.println("0. üö™ –í—ã—Ö–æ–¥");
    }

    /**
     * –ú–µ—Ç–æ–¥ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
     * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
     * @param manager –≠–∫–∑–µ–º–ø–ª—è—Ä ExpenseManager –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞.
     * @param scanner –û–±—ä–µ–∫—Ç Scanner –¥–ª—è —á—Ç–µ–Ω–∏—è –≤–≤–æ–¥–∞.
     */
    private static void addExpense(ExpenseManager manager, Scanner scanner) {
        try {
            System.out.print("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Ä–∞—Å—Ö–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 55.50): "); // –ó–∞–ø—Ä–æ—Å —Å—É–º–º—ã
            // –°—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É, –∑–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—É—é –Ω–∞ —Ç–æ—á–∫—É (–¥–ª—è Double) –∏ –ø–∞—Ä—Å–∏–º
            double amount = Double.parseDouble(scanner.nextLine().replace(',', '.'));

            System.out.print("–í–≤–µ–¥–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ï–¥–∞, –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç): "); // –ó–∞–ø—Ä–æ—Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            String category = scanner.nextLine().trim(); // –°—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –∏ —É–¥–∞–ª—è–µ–º –ø—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º

            System.out.print("–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É (–≤ —Ñ–æ—Ä–º–∞—Ç–µ –ì–ì–ì–ì-–ú–ú-–î–î, –Ω–∞–ø—Ä–∏–º–µ—Ä, 2025-11-28): "); // –ó–∞–ø—Ä–æ—Å –¥–∞—Ç—ã
            String dateStr = scanner.nextLine().trim();

            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç Expense, —á—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–∞—Ç—ã
            Expense newExpense = new Expense(amount, category, dateStr);
            manager.addExpense(newExpense); // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç —á–µ—Ä–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä

        } catch (NumberFormatException e) {
            // –ï—Å–ª–∏ Double.parseDouble –Ω–µ —Å–º–æ–≥ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ
            System.out.println("‚ùå –û—à–∏–±–∫–∞: –°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å–ª–æ–º.");
        } catch (DateTimeParseException e) {
            // –ï—Å–ª–∏ LocalDate.parse –Ω–µ —Å–º–æ–≥ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –¥–∞—Ç—É –Ω—É–∂–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
            System.out.println("‚ùå –û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ì–ì–ì–ì-–ú–ú-–î–î.");
        } catch (Exception e) {
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
            System.out.println("‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: " + e.getMessage());
        }
    }
}
