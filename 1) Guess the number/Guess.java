import java.util.Random;
import java.util.Scanner;

public class Guess {
    public static void main(String[] args) {
        // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –í—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–π Scanner –≤ finally –±–ª–æ–∫–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π try-with-resources
        Scanner scanner = new Scanner(System.in);
        Random random = new Random();
        boolean playAgain = true;

        // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –î–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å, –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –æ—Å—Ç–∞–≤–∏–º —Ç–∞–∫
        int wins = 0;
        int losses = 0;
        int bestScore = Integer.MAX_VALUE; // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å -1 –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å if (bestScore == -1)

        System.out.println("üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É '–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ'!");
        
        while (playAgain) {
            // --- –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ---
            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ú–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ selectDifficulty()
            System.out.println("\nüìä –í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:");
            System.out.println("1 - –õ—ë–≥–∫–∏–π (1-50, 10 –ø–æ–ø—ã—Ç–æ–∫)");
            System.out.println("2 - –°—Ä–µ–¥–Ω–∏–π (1-100, 7 –ø–æ–ø—ã—Ç–æ–∫)");
            System.out.println("3 - –°–ª–æ–∂–Ω—ã–π (1-200, 5 –ø–æ–ø—ã—Ç–æ–∫)");
            System.out.print("üëâ –¢–≤–æ–π –≤—ã–±–æ—Ä: ");

            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥ (–Ω–µ —á–∏—Å–ª–∞)
            int difficulty = scanner.nextInt();

            int maxAttempts;
            int maxRange;
            
            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: Switch expression (Java 14+) —Å–¥–µ–ª–∞–ª –±—ã –∫–æ–¥ –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ
            switch (difficulty) {
                case 1:
                    maxAttempts = 10;
                    maxRange = 50;
                    break;
                case 2:
                    maxAttempts = 7;
                    maxRange = 100;
                    break;
                case 3:
                    maxAttempts = 5;
                    maxRange = 200;
                    break;
                default:
                    // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –•–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥
                    System.out.println("‚ö†Ô∏è  –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–±–æ—Ä. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å '–°—Ä–µ–¥–Ω–∏–π'.");
                    maxAttempts = 7;
                    maxRange = 100;
            }

            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: nextInt(n) –¥–∞–µ—Ç —á–∏—Å–ª–∞ –æ—Ç 0 –¥–æ n-1, –ø–æ—ç—Ç–æ–º—É +1
            int numberToGuess = random.nextInt(maxRange) + 1;
            int attempts = 0;
            boolean guessed = false;

            System.out.println("\nüîÆ –Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ " + maxRange +
                    ". –£ —Ç–µ–±—è –µ—Å—Ç—å " + maxAttempts + " –ø–æ–ø—ã—Ç–æ–∫!");

            // --- –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª ---
            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            while (attempts < maxAttempts && !guessed) {
                System.out.print("\nüéØ –ü–æ–ø—ã—Ç–∫–∞ " + (attempts + 1) + "/" + maxAttempts + ". –í–≤–µ–¥–∏ —á–∏—Å–ª–æ: ");
                
                // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –û–ü–ê–°–ù–û! –ï—Å–ª–∏ –≤–≤–µ—Å—Ç–∏ –Ω–µ —á–∏—Å–ª–æ - –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–ø–∞–¥–µ—Ç
                // –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å scanner.hasNextInt() –≤ —Ü–∏–∫–ª–µ
                int guess = scanner.nextInt();
                attempts++;

                if (guess < numberToGuess) {
                    System.out.println("üìà –ú–æ—ë —á–∏—Å–ª–æ –ë–û–õ–¨–®–ï —Ç–≤–æ–µ–≥–æ.");
                } else if (guess > numberToGuess) {
                    System.out.println("üìâ –ú–æ—ë —á–∏—Å–ª–æ –ú–ï–ù–¨–®–ï —Ç–≤–æ–µ–≥–æ.");
                } else {
                    System.out.println("üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã —É–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –∑–∞ " + attempts + " –ø–æ–ø—ã—Ç–æ–∫.");
                    guessed = true;
                    wins++;
                    
                    // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥
                    if (attempts < bestScore) {
                        bestScore = attempts;
                        System.out.println("üî• –ù–æ–≤—ã–π —Ä–µ–∫–æ—Ä–¥: " + attempts + " –ø–æ–ø—ã—Ç–æ–∫!");
                    }
                    break;
                }

                // --- –£–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ ---
                // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: "–ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞" 3 –∏ 5 - –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
                if (attempts == 3 && !guessed) {
                    System.out.println("üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –∏—Å–ø–æ–ª—å–∑—É–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–µ–ª–µ–Ω–∏—è –ø–æ–ø–æ–ª–∞–º (–±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫)!");
                    System.out.println("   –ù–∞—á–Ω–∏ —Å —Å–µ—Ä–µ–¥–∏–Ω—ã –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ —É–º–µ–Ω—å—à–∞–π –µ–≥–æ –≤–¥–≤–æ–µ.");
                } else if (attempts == 5 && !guessed) {
                    // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —á–µ—Ç–Ω–æ—Å—Ç–∏ —Å—É–∂–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ 2 —Ä–∞–∑–∞
                    if (numberToGuess % 2 == 0) {
                        System.out.println("üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: —á–∏—Å–ª–æ –ß–Å–¢–ù–û–ï.");
                    } else {
                        System.out.println("üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: —á–∏—Å–ª–æ –ù–ï–ß–Å–¢–ù–û–ï.");
                    }
                }
                
                // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø–æ–ø—ã—Ç–∫–∏
                int remainingAttempts = maxAttempts - attempts;
                if (remainingAttempts > 0 && !guessed) {
                    System.out.println("‚è≥ –û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫: " + remainingAttempts);
                }
            }

            // --- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ä–∞–∂–µ–Ω–∏—è ---
            if (!guessed) {
                System.out.println("\nüò¢ –£–≤—ã! –¢—ã –Ω–µ —É–≥–∞–¥–∞–ª. –ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±—ã–ª–æ: " + numberToGuess);
                losses++;
            }

            // --- –°–æ–≤–µ—Ç—ã –ø–æ—Å–ª–µ –∏–≥—Ä—ã ---
            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ú–∞—Å—Å–∏–≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ –≤ static final –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞
            String[] tips = {
                "üí° –°–æ–≤–µ—Ç: –Ω–∞—á–∏–Ω–∞–π —É–≥–∞–¥—ã–≤–∞—Ç—å —Å —Å–µ—Ä–µ–¥–∏–Ω—ã –¥–∏–∞–ø–∞–∑–æ–Ω–∞ - —ç—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è!",
                "üí° –°–æ–≤–µ—Ç: –∑–∞–ø–æ–º–∏–Ω–∞–π –≤–≤–µ–¥–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞, —á—Ç–æ–±—ã –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è.",
                "üí° –°–æ–≤–µ—Ç: –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ —Å—É–∂–∞–π –¥–∏–∞–ø–∞–∑–æ–Ω –≤–æ–∑–º–æ–∂–Ω—ã—Ö —á–∏—Å–µ–ª.",
                "üí° –°–æ–≤–µ—Ç: –æ–±—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —á–µ—Ç–Ω–æ—Å—Ç—å —á–∏—Å–ª–∞ - —ç—Ç–æ —É–±–∏—Ä–∞–µ—Ç –ø–æ–ª–æ–≤–∏–Ω—É –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤!",
                "üí° –°–æ–≤–µ—Ç: –Ω–µ —Å–ø–µ—à–∏ - –¥—É–º–∞–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏, –∞ –Ω–µ –Ω–∞—É–≥–∞–¥.",
                "üí° –°–æ–≤–µ—Ç: –∏—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã - '–±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ' –æ—á–µ–Ω—å —Ü–µ–Ω–Ω–∞!",
                "üí° –°–æ–≤–µ—Ç: –Ω–∞ —Å–ª–æ–∂–Ω–æ–º —É—Ä–æ–≤–Ω–µ –≤–∞–∂–Ω–∞ –∫–∞–∂–¥–∞—è –ø–æ–ø—ã—Ç–∫–∞ - –±—É–¥—å —Ç–æ—á–µ–Ω –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö."
            };
            
            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: Random –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–æ–≤–µ—Ç–∞
            int randomTipIndex = random.nextInt(tips.length);
            System.out.println("\n" + tips[randomTipIndex]);

            // --- –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ---
            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –ú–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ printStatistics()
            System.out.println("\nüìä ========== –°–¢–ê–¢–ò–°–¢–ò–ö–ê ==========");
            System.out.println("‚úÖ –ü–æ–±–µ–¥—ã: " + wins + " | ‚ùå –ü–æ—Ä–∞–∂–µ–Ω–∏—è: " + losses);
            if (wins + losses > 0) {
                double winRate = (double) wins / (wins + losses) * 100;
                System.out.printf("üìà –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥: %.1f%%\n", winRate);
            }
            if (bestScore != Integer.MAX_VALUE) {
                System.out.println("üèÜ –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: " + bestScore + " –ø–æ–ø—ã—Ç–æ–∫.");
            }
            System.out.println("======================================");

            // --- –°–Ω–æ–≤–∞ –∏–≥—Ä–∞—Ç—å ---
            // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: next() —á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–ª–æ–≤–æ, nextLine() —á–∏—Ç–∞–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É
            System.out.print("\nüîÑ –•–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑? (–¥–∞/–Ω–µ—Ç): ");
            String answer = scanner.next();
            playAgain = answer.equalsIgnoreCase("–¥–∞") || 
                       answer.equalsIgnoreCase("yes") || 
                       answer.equalsIgnoreCase("y") || 
                       answer.equalsIgnoreCase("–¥");
        }

        // üéØ –ü–û–î–°–ö–ê–ó–ö–ê: –í—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–π —Ä–µ—Å—É—Ä—Å—ã!
        scanner.close();
        System.out.println("\nüëã –°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É! –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –µ—â—ë!");
        System.out.println("‚≠ê –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: " + wins + " –ø–æ–±–µ–¥, " + losses + " –ø–æ—Ä–∞–∂–µ–Ω–∏–π");
        if (bestScore != Integer.MAX_VALUE) {
            System.out.println("‚≠ê –¢–≤–æ–π –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: " + bestScore + " –ø–æ–ø—ã—Ç–æ–∫");
        }
    }
}
